id: assistant
applications:
  - name: slack
    command: node ./dist/chat.slack.cjs
    health-check-type: process
    no-route: true
    stack: cflinuxfs4
    memory: 512M
    instances: 3
    version: 0.0.2
    env:
      NODE_OPTIONS: --max-http-header-size=80000
      NODE_ENV: production
      LOG_SENSITIVE_CONNECTION_DATA: true
      LOG_REMOTE_USER: true
      LOG_REFERER: true
      YJS_URL: 'https://yjs.cfapps.us10-001.hana.ondemand.com:'
    buildpacks:
      - https://github.com/cloudfoundry/nodejs-buildpack
  - name: web
    command: node ./dist/chat.web.cjs
    routes:
      - route: 'https://assistant.cfapps.eu20-001.hana.ondemand.com'
    stack: cflinuxfs4
    memory: 512M
    instances: 3
    version: 0.0.2
    env:
      NODE_OPTIONS: --max-http-header-size=80000
      NODE_ENV: production
      LOG_SENSITIVE_CONNECTION_DATA: true
      LOG_REMOTE_USER: true
      LOG_REFERER: true
      YJS_URL: 'https://yjs.cfapps.us10-001.hana.ondemand.com:'
      MCP_GATEWAY_URL: 'https://gateway.cfapps.eu20-001.hana.ondemand.com'
      MCP_DASHBOARD_URL: 'https://dashboard.cfapps.eu20-001.hana.ondemand.com'
      
    buildpacks:
      - https://github.com/cloudfoundry/nodejs-buildpack

  - name: dashboard
    routes:
      - route: 'https://dashboard.cfapps.eu20-001.hana.ondemand.com'
    command: node ./dist/gateway.dashboard.cjs
    stack: cflinuxfs4
    memory: 512M
    instances: 1
    version: 0.0.2
    env:
      NODE_OPTIONS: --max-http-header-size=80000
      NODE_ENV: production
      LOG_SENSITIVE_CONNECTION_DATA: true
      LOG_REMOTE_USER: true
      LOG_REFERER: true
      YJS_URL: 'https://yjs.cfapps.us10-001.hana.ondemand.com:'
    buildpacks:
      - https://github.com/cloudfoundry/nodejs-buildpack
  - name: gateway
    routes:
      - route: 'https://gateway.cfapps.eu20-001.hana.ondemand.com'

    command: node ./dist/gateway.mcp.server.cjs
    stack: cflinuxfs4
    memory: 1024M
    instances: 1
    version: 0.0.2
    
    env:
      NODE_OPTIONS: --max-http-header-size=80000
      NODE_ENV: production
      LOG_SENSITIVE_CONNECTION_DATA: true
      LOG_REMOTE_USER: true
      LOG_REFERER: true
      YJS_URL: 'https://yjs.cfapps.us10-001.hana.ondemand.com:'
      
    buildpacks:
      - https://github.com/cloudfoundry/nodejs-buildpack
  - name: inspector
    routes:
      - route: 'https://inspector.cfapps.eu20-001.hana.ondemand.com'
    command: npm run inspector
    stack: cflinuxfs4
    memory: 256M
    instances: 1
    version: 0.0.2
    env:
      NODE_OPTIONS: --max-http-header-size=80000
      NODE_ENV: production
      
    buildpacks:
      - https://github.com/cloudfoundry/nodejs-buildpack
    
